<div class="settings-panel">
  <!-- SecciÃ³n de configuraciÃ³n -->
  <div *ngIf="!showDeletedServices" class="settings-content">
    <div class="settings-section">
      <h3 class="settings-title">â±ï¸ ConfiguraciÃ³n de Intervalos</h3>
      <p class="settings-description">Define con quÃ© frecuencia se realizarÃ¡n los health checks segÃºn la importancia del servicio</p>

      <div class="settings-group">
        <div class="setting-item">
          <label class="setting-label">
            <span class="label-icon">ğŸ”´</span>
            Intervalo Alta (segundos)
          </label>
          <input type="number" [(ngModel)]="model.intervalHighS" class="setting-input" placeholder="60" min="10" />
          <span class="setting-hint">Servicios crÃ­ticos - Se verifica frecuentemente</span>
        </div>

        <div class="setting-item">
          <label class="setting-label">
            <span class="label-icon">ğŸŸ¡</span>
            Intervalo Media (segundos)
          </label>
          <input type="number" [(ngModel)]="model.intervalMediumS" class="setting-input" placeholder="300" min="30" />
          <span class="setting-hint">Servicios normales - VerificaciÃ³n moderada</span>
        </div>

        <div class="setting-item">
          <label class="setting-label">
            <span class="label-icon">ğŸŸ¢</span>
            Intervalo Baja (segundos)
          </label>
          <input type="number" [(ngModel)]="model.intervalLowS" class="setting-input" placeholder="600" min="60" />
          <span class="setting-hint">Servicios no crÃ­ticos - VerificaciÃ³n ocasional</span>
        </div>

        <div class="setting-item">
          <label class="setting-label">
            <span class="label-icon">âš¡</span>
            Jitter MÃ¡ximo (segundos)
          </label>
          <input type="number" [(ngModel)]="model.jitterMaxS" class="setting-input" placeholder="12" min="1" />
          <span class="setting-hint">VariaciÃ³n aleatoria para evitar picos</span>
        </div>
      </div>
    </div>

    <div class="settings-section">
      <h3 class="settings-title">ğŸ”” ConfiguraciÃ³n de Incidentes</h3>
      
      <div class="setting-checkbox">
        <input type="checkbox" id="autoIncident" [(ngModel)]="model.autoIncidentCreation" />
        <label for="autoIncident" class="checkbox-label">
          Crear incidentes automÃ¡ticos desde Health Checks
        </label>
        <span class="checkbox-hint">Se generarÃ¡n incidentes cuando se detecte un problema</span>
      </div>
    </div>

    <div class="settings-actions">
      <button class="btn-primary" (click)="save()" [disabled]="saving">
        {{ saving ? 'ğŸ’¾ Guardando...' : 'âœ“ Guardar cambios' }}
      </button>
      <span class="save-message" [class.success]="message.includes('Ã©xito')" [class.error]="message.includes('Error')">
        {{ message }}
      </span>
    </div>

    <div class="settings-footer">
      <button class="btn-secondary" (click)="toggleDeletedServices()">
        ğŸ‘ï¸ Ver servicios eliminados
      </button>
    </div>
  </div>

  <!-- SecciÃ³n de servicios eliminados -->
  <div *ngIf="showDeletedServices" class="deleted-services-content">
    <div class="deleted-header">
      <h3 class="settings-title">ğŸ—‘ï¸ Servicios Eliminados</h3>
      <button class="btn-close" (click)="toggleDeletedServices()">âœ• Volver a Ajustes</button>
    </div>

    <div class="deleted-list">
      <div *ngIf="deletedServices && deletedServices.length > 0; else noDeleted">
        <div class="deleted-service-card" *ngFor="let service of deletedServices">
          <div class="deleted-service-header">
            <div>
              <h4>{{ service.nombre }}</h4>
              <p class="deleted-service-desc">{{ service.descripcion }}</p>
            </div>
            <div class="deleted-service-actions">
              <button class="btn-secondary" (click)="restoreService(service._id)" [disabled]="restoring">
                {{ restoring ? 'â³ Restaurando...' : 'â™»ï¸ Restaurar' }}
              </button>
              <button class="btn-danger" (click)="permanentlyDeleteService(service._id)" [disabled]="deleting">
                {{ deleting ? 'â³ Eliminando...' : 'ğŸ—‘ï¸ Eliminar' }}
              </button>
            </div>
          </div>
          <div class="deleted-service-info">
            <span>ğŸ¢ Tipo: {{ service.tipo }}</span>
            <span>ğŸ“¦ Endpoint: {{ service.endpoint?.url || 'Sin endpoint' }}</span>
            <span>â­ Importancia: {{ service.importancia }}</span>
            <span>ğŸ“… Eliminado: {{ service.deletedAt | date:'short' }}</span>
          </div>
        </div>
      </div>

      <ng-template #noDeleted>
        <div class="no-deleted-services">
          <p>No hay servicios eliminados ğŸ‰</p>
        </div>
      </ng-template>
    </div>
  </div>
</div>
